<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact</title>
    <link rel="stylesheet" href="main.css">
</head>

<style>


#contact{

    background-color: gainsboro;
    margin: auto;
   width: 50%;
  border: 3px solid grey;
  padding: 10px;
  height: 200px;
  width:400px
}

</style>
<body>

    <div id="logo"> WishMatch</div>

    <div id="contact"> 
    <header>
        <h2>Contact</h2>
    </header>
    <main>
        <form id = "message">

            <label for = "uname" > Input trader's username: </label>
            <input type = "text" id = "uname" name = "uname"><br>
            <label for = "yname" > Input your username: </label>
            <input type = "text" id = "yname" name = "yname"><br>
            <label for="message">Your message to trader:</label><br>
           <input type="text" id="message" name="message" maxlenght="1000" size="50"><br><br>
        
            <button type="submit">Submit</button>
            <button type="button" onclick="window.location.href='index.html'">Cancel</button>
        </form>
    </main>

    </div>
</body>
    <script type = "module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
        import { collection, addDoc, getFirestore } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";

        const firebaseApp = initializeApp ({
    apiKey: "AIzaSyBFPDSlVYKiW1mpKCbGYZiN94qF_WPg-9g",
    authDomain: "info1601-grproject.firebaseapp.com",
    projectId: "info1601-grproject",
    storageBucket: "info1601-grproject.appspot.com",
    messagingSenderId: "48425542087",
    appId: "1:48425542087:web:6e6dac09cb7da63da4b9e2",
    measurementId: "G-T83E3K6DDE"
});

        const form = document.querySelector('#message');
        const db = getFirestore(firebaseApp);

        form.addEventListener('submit', sendMessage());
        
        async function sendMessage () {

            await addDoc(collection(db, "message", `${form.uname.value}`), {
          sender: form.yname.value,
          message: form.message.value 
        });
    form.yname.value = '';
    form.message.value = '';
    form.uname.value = '';
        }
        
    </script>
</html>



